language: node_js
services:
- docker
env:
  global:
  - DOCKER_IMAGE_NAME=casche/horizon-with-docker
  - COMMIT=${TRAVIS_COMMIT::8}
  matrix:
  - secure: mYeRDOjcU+0vz+MxG094IsFusddmHKtUtPt6CM6NZmtvzY3OynTyNE4YYZwUPqe/WFiOuZ79MGUehjJeStE9+voTaVY3hb+iMFStmimErGireRoysIYHfFc1HKoqSbXTM/NZ935Y3PQk6MGIrOmgEbw4A0WZrq8lX55hsV0WfFsel8B08IBf2RcHnfM1QYXtdSpZtUR2B42Y9lo96C30krF3ywMPCfJZK2W8o1vG5sHytl+Vh5QZTDH7heCO064qxRaq218vw+YPXFnecZlp8kILTaWDdhPOGACMBwQZZOAKNi6RWyvxYpHPGCLYTCtwJ+dCoYWYSBonTH4ASgabVlnwzcVz1WDEmX6KBfLLnD0lDkI6uavxl5fQ85okXGUJ8jYnhw45t+4lMGW0ZzPWO7dUYSkj39GrT4+sOZp50DtQKBvaPxBzQ2P9N/KDNyUXu5Xs8RD7z4HA1FvTpAdFCpHp0vhWB6iQoY4sXgf6x7q2iLzQRCvk3VXjV8iniDL9dk58TIUuZGKn+yKs1kTy9sO1qOEle/O5SJ2l64GcUQlxV1mF+pKOGAA/qRT4qjie8Oid6A2UxaerNKUFaiG/TBrVa8KMZLdXxISXjKEBFVJc3ryEeF5qajodTE96GcqE+7yn2DZCQWFtpc9HBNEpZ/c7PSDUSDV2LPucoeo5x6Y=
  - secure: AsWrqOJRZcpojCGivqRn7p9wc7JH/hB3Qbkj4hzqTKOI3pMoYjrGW28mDvanfY32j5INccLWdEXYOohUY+iLM5+WdX7FSx2Vx4DuXtRzxCfqpsFD5z80J6DSSGBUk/3soTX3ip91No0gnisbTCRgXARy1P9gwvqT+nh1SmDA/Q/KxocvbQ6p6gOQrFY87XjtXryFuVjAPR+a0lHryH/r+qWYIJbtfYJZadnXuBzZY1uLsndmOax7xHdldB1LOkSedKrFT7yVSc9i7IOEPX1Fx0mG1k6Q1u/Hhrz5vA17vqG58+sVxQ6XQkgxu2N1ESEMoMD+l8cs1IiOC7boMCNLRHIoVolnazXLXhUwSCUYpOdYMn0KcUB1BYP4SbHWYaeDFgVa3eaZMnf958QFzqjXupcef7HIysyBK/oitsrrVpMp17C3o+25pp9YXIKiwOKz4E6N7sNhcrLqfRyTcljeb/iZtNkdqyWQFvpz3uxrAwz67GIWrTzUy73QSjLGkwmDOGbthl1fIUN80/Y8VdszJMSfeEh8p9CHmHT+oCvBXamw04YgcdTR1aJ6mcDXl4C+cZpbQyy9UDwU2GW6VA5sYVT07vruVf5fwsNgWx7pcUECaQnCUTBykGlLPiTD5/0qx+q9ZZCSiEixpz7B032AmLYwKtxGJvbKnMOKDKmnKoM=
  - secure: sEUbqdbnD7te3Q4LfzEoRNOwcMyze6tUdhpMvtG9ld5ohj3iOEaz9b7IYqYnmv7iIgX6QReldxZJg0bpRaO0sFUX82ejmK5FNDpGVsGCevh4K3lbTOnieDjxvyrHg40KdR3RU0WWMKzhlKc938FcVBSEplYR4RtWlgdlKvgQquNJCi5qC3gObvMfuN1cOHG2/Ztf5U+DxZo0c/5KULuJxuPIumzhnd8dZLgGNiBrXbSgq0IZBfRGc0jMX6HcNCjRY9SirS1/yccF59BE6iu0wWPzt5pHTlG+OxN1Gj+zoZ5sqlZbkC1DqIP2EQusT5XJtZIySkYqbQrukQVUzfcszTS/Lf+RS6k/fElsMBwPDQUZSTsqjds7Q5JhufYgsiiU1zp6P87r18O9ccI10/rmZHQDib9xMfz3s8O2hiR1cakhYd5UlWiKzN3lF36siBhTa7AAqH6m+pE/WKj4b2GS/I7CY5KvedLAjWfraYCkSNbTuiU/16D1iiVhfvQKLYUBWdo3x7lPjeAwh1ANhhSzn+qdlYA8ZbYa0wOAbmmoJrxfI07ouoVwYACYLwiudpq9UN62ZObcvzdo9Alv57aRIGnrSZJ34IjRbdRZTWthChkg5cxkO/15UgGJhwEtFSQNXWJPrinvNZ39Ug/O7BP6seZM48hqIk/u5BWClZYyIEo=
after_success:
- docker login -e="$DOCKER_EMAIL" -u="$DOCKER_USER" -p="$DOCKER_PASS"
- docker build -f Dockerfile -t $DOCKER_IMAGE_NAME .
- if [ ! -z "$TRAVIS_TAG" ]; then docker tag $DOCKER_IMAGE_NAME:latest $DOCKER_IMAGE_NAME:$TRAVIS_TAG;
  fi && docker push $DOCKER_IMAGE_NAME
